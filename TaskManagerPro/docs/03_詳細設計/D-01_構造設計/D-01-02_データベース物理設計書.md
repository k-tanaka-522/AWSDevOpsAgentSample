# D-01-02 データベース物理設計書

## 1. 物理設計方針
- **DBMS**: SQLite 3
- **ORM**: Entity Framework Core 9.0 (Code First)
- **文字コード**: UTF-8
- **日付管理**: TEXT型 (ISO8601形式)

## 2. テーブル定義 (DDL相当)

### 2.1 Tasks テーブル
タスク情報を格納するメイントランザクションテーブル。

| 論理名 | 物理名 | 型 | NULL | Default | PK | FK | 備考 |
|---|---|---|---|---|---|---|---|
| ID | Id | INTEGER | No | Auto | ○ | | |
| タイトル | Title | TEXT | No | | | | |
| 説明 | Description | TEXT | No | '' | | | 最大長制限なし |
| 期日 | DueDate | TEXT | Yes | NULL | | | 'YYYY-MM-DD' |
| カテゴリID | CategoryId | INTEGER | No | 1 | | ○ | Categories.Id |
| 工数 | EffortHours | REAL | No | 1.0 | | | 精度: 小数点1桁 |
| 影響度 | ImpactScore | INTEGER | No | 5 | | | 1-10 の整数 |
| 緊急度 | UrgencyScore | INTEGER | No | 5 | | | 1-10 の整数 |
| 優先度 | PriorityScore | REAL | No | 0.0 | | | 計算結果を保持 |
| 完了フラグ | IsCompleted | INTEGER | No | 0 | | | 0=False, 1=True |
| 作成日時 | CreatedAt | TEXT | No | Now | | | |
| 更新日時 | UpdatedAt | TEXT | No | Now | | | |

### 2.2 Categories テーブル
分類マスタ。

| 論理名 | 物理名 | 型 | NULL | Default | PK | FK | 備考 |
|---|---|---|---|---|---|---|---|
| ID | Id | INTEGER | No | Auto | ○ | | |
| 名称 | Name | TEXT | No | | | | UNIQUE制約 |
| カラー | ColorHex | TEXT | No | '#FFFFFF' | | | UX用カラーコード |

## 3. インデックス定義
| 対象テーブル | インデックス名 | カラム構成 | 目的 |
|---|---|---|---|
| **Tasks** | `IX_Tasks_Priority` | `IsCompleted ASC, PriorityScore DESC` | メイン画面での「未完了かつ優先度順」表示の高速化。 |

## 4. 初期データ (Seed Data)
アプリケーション初回起動時に自動生成されるマスターデータ。

### 4.1 Categories
| Id | Name | ColorHex | SortOrder |
|---|---|---|---|
| 1 | Inbox | #808080 | 0 |
| 2 | Work | #0078D4 | 1 |
| 3 | Personal | #107C10 | 2 |
